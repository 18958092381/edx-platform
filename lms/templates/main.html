<%namespace name='static' file='static_content.html'/>
<%! from django.utils import html %>
<!DOCTYPE html>
<html>
<head>
  <%block name="title">
  % if settings.MITX_FEATURES.get("USE_CUSTOM_THEME"):
    <title>Home | class.stanford.edu</title>
  % else:
    <title>edX</title>
  % endif
  </%block>

  <script type="text/javascript">
  /* immediately break out of an iframe if coming
     from the marketing website */
  (function(window) {
    if (window.location !== window.top.location) {
      window.top.location = window.location;
    }
  })(this);
  </script>

  <%
    if settings.MITX_FEATURES.get("USE_CUSTOM_THEME"):
      favicon_path = 'themes/' + settings.THEME_NAME + '/images/favicon.ico'
    else:
      favicon_path = 'images/favicon.ico'
  %>
  <link rel="icon" type="image/x-icon" href="${static.url(favicon_path)}" />

  <%static:css group='application'/>

  <%static:js group='main_vendor'/>
  <%block name="headextra"/>

  <!--[if lt IE 9]>
  <script src="${static.url('js/html5shiv.js')}"></script>
  <![endif]-->

  <!--[if lte IE 9]>
  <%static:css group='ie-fixes'/>
  <![endif]-->
  <meta name="path_prefix" content="${MITX_ROOT_URL}">
  <meta name="google-site-verification" content="_mipQ4AtZQDNmbtOkwehQDOgCxUUV2fb_C0b6wbiRHY" />

  % if not course:
    % if settings.MITX_FEATURES.get("USE_CUSTOM_THEME"):
      <%include file="lms/theme-google-analytics.html" />
    % else:
      <%include file="google_analytics.html" />
    % endif
  % endif

  % if settings.MITX_FEATURES.get("USE_CUSTOM_THEME"):
    <%include file="lms/theme-head-extra.html" />
  % endif

</head>

<body class="<%block name='bodyclass'/>">

% if settings.MITX_FEATURES.get("USE_CUSTOM_THEME"):
  <%include file="lms/theme-header.html" />
% elif not suppress_toplevel_navigation:
  <%include file="navigation.html" />
% endif

  <section class="content-wrapper">
    ${self.body()}
    <%block name="bodyextra"/>
  </section>

% if settings.MITX_FEATURES.get("USE_CUSTOM_THEME"):
  <%include file="lms/theme-footer.html" />
% elif not suppress_toplevel_navigation:
  <%include file="footer.html" />
% endif

  <%static:js group='application'/>
  <%static:js group='module-js'/>

  <%block name="js_extra"/>
</body>
</html>

<%def name="login_query()">${
  "?course_id={0}&enrollment_action={1}".format(
    html.escape(course_id),
    html.escape(enrollment_action)
  ) if course_id and enrollment_action else ""
}</%def>
